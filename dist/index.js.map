{"version":3,"sources":["../server/index.js"],"names":["Aplicacion","app","config","http","createServer","socket","RunningSocket","routes","disable","use","express","json","urlencoded","extended","on","data","GlobalModel","newmeesageglobal","save","broadcast","emit","status","listen","process","env","PORT","console","log","start"],"mappings":";;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;IACMA,U;;;AACF,wBAAa;AAAA;AACT,SAAKC,GAAL,GAAS,0BAAT;AACA,SAAKC,MAAL;AACA,SAAKC,IAAL,GAAUA,iBAAKC,YAAL,CAAkB,KAAKH,GAAvB,CAAV;AACA,SAAKI,MAAL,GAAY,wBAAS,KAAKF,IAAd,CAAZ;AACA,SAAKG,aAAL;AACA,SAAKC,MAAL;AACH;;;;6BACO;AACJ;AACA,WAAKN,GAAL,CAASO,OAAT,CAAiB,MAAjB;AACA,WAAKP,GAAL,CAASQ,GAAT,CAAa,GAAb,EAAiBF,mBAAjB;AACH;;;6BACO;AACJ;AACA,WAAKN,GAAL,CAASQ,GAAT,CAAaC,oBAAQC,IAAR,EAAb;AACA,WAAKV,GAAL,CAASQ,GAAT,CAAaC,oBAAQE,UAAR,CAAmB;AAACC,QAAAA,QAAQ,EAAC;AAAV,OAAnB,CAAb;AACA,WAAKZ,GAAL,CAASQ,GAAT,CAAa,wBAAO,KAAP,CAAb;AACA,WAAKR,GAAL,CAASQ,GAAT,CAAa,uBAAb;AACH;;;oCACc;AACX,WAAKJ,MAAL,CAAYS,EAAZ,CAAe,YAAf,EAA4B,UAACT,MAAD,EAAU;AAClC;AACA;AACAA,QAAAA,MAAM,CAACS,EAAP,CAAU,eAAV,EAA0B,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDAGO,IAAIC,kBAAJ,CAAgBD,IAAhB,CAHP;;AAAA;AAGhBE,kBAAAA,gBAHgB;AAAA;AAAA,uDAKhBA,gBAAgB,CAACC,IAAjB,EALgB;;AAAA;AAOtBb,kBAAAA,MAAM,CAACc,SAAP,CAAiBC,IAAjB,CAAsB,kBAAtB,EAAyC;AAACC,oBAAAA,MAAM,EAAC;AAAR,mBAAzC,EAPsB,CAStB;;AATsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA1B;AAWH,OAdD;AAeH;;;4BACM;AACH,WAAKlB,IAAL,CAAUmB,MAAV,CAAiBC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAArC,EAA0C,YAAI;AAC3CC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACF,OAFD;AAGH;;;;;AAEL,IAAI3B,UAAJ,GAAiB4B,KAAjB","sourcesContent":["import  express from 'express';\r\nimport  http from 'http';\r\nimport  SocketIO from 'socket.io';\r\nimport  cors from 'cors';\r\nimport  morgan from 'morgan';\r\nimport conexion from './connect/conexion';\r\nimport GlobalModel from './model/global';\r\nimport  routes from './routes/routes';\r\nimport '@babel/polyfill';\r\nclass Aplicacion{\r\n    constructor(){\r\n        this.app=express();\r\n        this.config();\r\n        this.http=http.createServer(this.app);\r\n        this.socket=SocketIO(this.http);\r\n        this.RunningSocket();\r\n        this.routes();\r\n    }\r\n    routes(){\r\n        //desabilita la cache\r\n        this.app.disable('etag');\r\n        this.app.use(\"/\",routes);\r\n    }\r\n    config(){\r\n        //this.app.set('PORT',6549||process.env.PORT);\r\n        this.app.use(express.json());\r\n        this.app.use(express.urlencoded({extended:false}));\r\n        this.app.use(morgan('dev'));\r\n        this.app.use(cors());\r\n    }\r\n    RunningSocket(){\r\n        this.socket.on('connection',(socket)=>{\r\n            // console.log(\"User conected id : \"+socket.id);   \r\n            //socket.emit('gretting',{message:'Hello friend'});\r\n            socket.on('messageGlobal',async (data)=>{\r\n               // const {apodo,msj}=data;\r\n                //const longitud=await GlobalModel.find();\r\n                const newmeesageglobal=await new GlobalModel(data);\r\n                //const newmeesageglobal=await new GlobalModel({apodo,msj});\r\n                await newmeesageglobal.save();\r\n\r\n                socket.broadcast.emit('messageBroadcast',{status:\"Running\"});\r\n\r\n                //  console.log(data,newmeesageglobal);\r\n            });\r\n        });\r\n    }\r\n    start(){\r\n        this.http.listen(process.env.PORT || 5000,()=>{\r\n           console.log('server is running'); \r\n        });\r\n    }\r\n}\r\nnew Aplicacion().start();"],"file":"index.js"}